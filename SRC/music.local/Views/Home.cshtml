@using System.Web.Mvc.Html
@using music.local.Models
@inherits System.Web.Mvc.WebViewPage
@{
    Layout = null;
    List<SoundTrackModel> list = (List<SoundTrackModel>)ViewBag.Data;
    
}
<link href="~/Content/bootstrap3.3.7/css/bootstrap.css" rel="stylesheet"/>
<link href="~/Content/CSS/Site.css" rel="stylesheet" />
<link href="~/Content/jsTree/dist/themes/default/style.css" rel="stylesheet" />
<div class="body">
    <div class="main-cont">
        <div class="col-md-4">
            <ul class="nav nav-stacked">
                @{
                    var isFirst = "active";
                    var count = 0;
                    foreach (var soundTrackModel in list)
                    {
                        <li role="presentation" class="@isFirst"><a href="#@(count + soundTrackModel.Name)" aria-controls="home" role="tab" data-toggle="tab">@soundTrackModel.Name</a></li>
                        count++;
                        isFirst = "";
                    }
                }
            </ul>

        </div>
        <div class="col-md-8">
            <div class="tab-content">
                @{
                    isFirst = "active";
                    count = 0;
                    foreach (var soundTrackModel in list)
                    {
                        <div role="tabpanel" class="tab-pane @isFirst" id="@(count + soundTrackModel.Name)">
                            <div class="treeWraper">
                                <ul>
                                    @* build tree view *@
                                    @foreach (var item in soundTrackModel.ListTrack)
                                    {
                                        Html.RenderPartial("/Views/TreeNode.cshtml", item);
                                    }
                                </ul>
                            </div>
                        </div>
                        isFirst = "";
                        count++;
                    }
                }
            </div>
        </div>
    </div>
</div>
<div class="footer-player">
    <div class="albumCover"></div>
    <div class=" player-wraper">
        <audio id="player"></audio>
    </div>
</div>
<script src="~/Content/JS/jquery-3.1.1.min.js"></script>
<script src="~/Content/bootstrap3.3.7/js/bootstrap.js"></script>
<script src="~/Content/jsTree/dist/jstree.js"></script>

<script>                      
    function playAudio(cls) {
        console.log("clicked");
        var audio = $("#player");
        audio.html("");
        var newSrc = $("." + cls).first().data("src");
        audio.html('<source src="' + newSrc + '" type="audio/ogg" />');
        /****************/
        audio[0].pause();
        audio[0].load();//suspends and restores all audio element

        //audio[0].play(); changed based on Sprachprofi's comment below
        audio[0].oncanplaythrough = audio[0].play();
        /****************/
    }
    $('.treeWraper').jstree();
</script>